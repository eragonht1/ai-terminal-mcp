<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:;">
    <title>PowerShell Terminal Manager</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            background: #1e1e1e;
            color: #cccccc;
            height: 100vh;
            overflow: hidden;
        }

        /* 主容器 */
        .terminal-manager {
            display: flex;
            flex-direction: column;
            height: 100vh;
            background: #1e1e1e;
        }

        /* 标签栏 */
        .tab-bar {
            display: flex;
            background: #2d2d30;
            border-bottom: 1px solid #3e3e42;
            min-height: 35px;
            align-items: center;
        }

        .tab {
            display: flex;
            align-items: center;
            padding: 8px 16px;
            background: #2d2d30;
            border-right: 1px solid #3e3e42;
            cursor: pointer;
            color: #cccccc;
            font-size: 13px;
            min-width: 120px;
            max-width: 200px;
            position: relative;
            transition: background-color 0.2s;
        }

        .tab:hover {
            background: #37373d;
        }

        .tab.active {
            background: #1e1e1e;
            color: #ffffff;
        }

        .tab.loading {
            color: #ffa500;
        }

        .tab-title {
            flex: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .tab-close {
            margin-left: 8px;
            width: 16px;
            height: 16px;
            border-radius: 3px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            opacity: 0.7;
            transition: all 0.2s;
        }

        .tab-close:hover {
            background: #e81123;
            opacity: 1;
            color: white;
        }

        .new-tab-btn {
            padding: 8px 12px;
            background: transparent;
            border: none;
            color: #cccccc;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.2s;
        }

        .new-tab-btn:hover {
            background: #37373d;
        }

        /* 终端内容区域 */
        .terminal-content {
            flex: 1;
            position: relative;
            overflow: hidden;
        }

        .terminal-panel {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            flex-direction: column;
            background: #1e1e1e;
        }

        .terminal-panel.hidden {
            display: none;
        }

        /* xterm.js 终端区域 */
        .terminal-output {
            flex: 1;
            padding: 0;
            background: #1e1e1e;
            position: relative;
        }

        /* xterm.js 样式覆盖 */
        .xterm {
            height: 100% !important;
            width: 100% !important;
            padding: 10px;
            box-sizing: border-box;
        }

        .xterm .xterm-viewport {
            background-color: #1e1e1e !important;
        }

        .xterm .xterm-screen {
            background-color: #1e1e1e !important;
        }

        .xterm .xterm-cursor {
            background-color: #d4d4d4 !important;
        }

        .xterm .xterm-selection {
            background-color: #264f78 !important;
        }

        /* xterm.js 会处理所有输入输出，移除手动样式 */

        /* 会话信息 */
        .session-info {
            padding: 10px;
            background: #252526;
            border-bottom: 1px solid #3e3e42;
            font-size: 12px;
            color: #6a6a6a;
        }

        .session-id {
            color: #4ec9b0;
            font-weight: bold;
        }

        /* 状态栏 */
        .status-bar {
            height: 22px;
            background: #007acc;
            color: white;
            display: flex;
            align-items: center;
            padding: 0 10px;
            font-size: 12px;
        }

        .status-item {
            margin-right: 15px;
        }

        /* 空白状态 */
        .empty-state {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            background: #1e1e1e;
        }

        .empty-message {
            text-align: center;
            color: #cccccc;
        }

        .empty-message h3 {
            margin-bottom: 10px;
            color: #569cd6;
            font-size: 18px;
            font-weight: normal;
        }

        .empty-message p {
            color: #6a6a6a;
            font-size: 14px;
        }

        .empty-message strong {
            color: #cccccc;
            background: #37373d;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: inherit;
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .tab {
                min-width: 80px;
                max-width: 120px;
                padding: 6px 12px;
            }
            
            .terminal-output {
                font-size: 12px;
                padding: 8px;
            }
        }

        /* 加载动画 */
        @keyframes pulse {
            0% { opacity: 0.6; }
            50% { opacity: 1; }
            100% { opacity: 0.6; }
        }

        .loading .tab-title::after {
            content: "...";
            animation: pulse 1.5s infinite;
        }

        /* 滚动条美化 */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #2d2d30;
        }

        ::-webkit-scrollbar-thumb {
            background: #424242;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #4f4f4f;
        }
    </style>
</head>
<body>
    <div class="terminal-manager">
        <!-- 标签栏 -->
        <div class="tab-bar">
            <button class="new-tab-btn">+</button>
        </div>

        <!-- 终端内容区域 -->
        <div class="terminal-content">
            <!-- 空白状态提示 -->
            <div class="empty-state">
                <div class="empty-message">
                    <h3>Welcome to PowerShell Terminal Manager</h3>
                    <p>Click the <strong>+</strong> button to create a new terminal</p>
                </div>
            </div>
        </div>
    </div>

    <!-- 渲染进程脚本 -->
    <!-- xterm.js CSS -->
    <link rel="stylesheet" href="node_modules/@xterm/xterm/css/xterm.css" />

    <!-- xterm.js JavaScript -->
    <script src="node_modules/@xterm/xterm/lib/xterm.js"></script>
    <script src="node_modules/@xterm/addon-fit/lib/addon-fit.js"></script>
    <script src="node_modules/@xterm/addon-web-links/lib/addon-web-links.js"></script>

    <script src="renderer.js"></script>
</body>
</html>